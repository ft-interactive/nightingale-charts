<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for axis/number.scale.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">axis/number.scale.js</span></h1>
    <h2>
        Statements: <span class="metric">50.98% <small>(26 / 51)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">37.5% <small>(9 / 24)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">50% <small>(4 / 8)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">50% <small>(25 / 50)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">axis/</a> &#187; number.scale.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">module.exports = {
    removeDuplicateTicks: <span class="fstat-no" title="function not covered" >function (scale, ticks) {</span>
<span class="cstat-no" title="statement not covered" >        var formatted = [];</span>
<span class="cstat-no" title="statement not covered" >        var tickFormat = scale.tickFormat();</span>
<span class="cstat-no" title="statement not covered" >        ticks = ticks.filter(<span class="fstat-no" title="function not covered" >function (d) {</span></span>
<span class="cstat-no" title="statement not covered" >            var f = tickFormat(d);</span>
<span class="cstat-no" title="statement not covered" >            if (formatted.indexOf(f) &gt; -1) {</span>
<span class="cstat-no" title="statement not covered" >                return false;</span>
            }
<span class="cstat-no" title="statement not covered" >            formatted.push(f);</span>
<span class="cstat-no" title="statement not covered" >            return true;</span>
        });
<span class="cstat-no" title="statement not covered" >        return ticks;</span>
    },
    tickIntervalBoundaries: function (ticks) {
        var interval = 0, step;
        ticks.forEach(function (d, i) {
            if (i == ticks.length - 1)  return;
            // there was an issue with float precission
            // so we're ensuring the step is sound
            step = +((ticks[i + 1] - d).toPrecision(12));
            interval = Math.max(step, interval);
        });
        return interval;
    },
    detailedTicks: function (scale, pixelsPerTick) {
        var count = this.tickCount(scale, pixelsPerTick);
        var ticks = scale.ticks(count);
        var interval = this.tickIntervalBoundaries(ticks);
        var pos = scale.domain()[0] &gt; scale.domain()[1] ? 0 : 1;
        var d1 = Math.ceil(scale.domain()[pos] / interval) * interval;
        var d2 = Math.floor(scale.domain()[1-pos] / interval) * interval;
        ticks[d1&lt;=0 ? <span class="branch-0 cbranch-no" title="branch not covered" >'unshift' </span>: 'push'](d1);
        ticks[d2&lt;=0 ? 'unshift' : <span class="branch-1 cbranch-no" title="branch not covered" >'push']</span>(d2);
        scale.domain()[pos] = d1;
        scale.domain()[1-pos] = d2;
        return ticks;
    },
    simpleTicks: <span class="fstat-no" title="function not covered" >function (scale) {</span>
<span class="cstat-no" title="statement not covered" >        var customTicks = [];</span>
<span class="cstat-no" title="statement not covered" >        var domain = scale.domain();</span>
<span class="cstat-no" title="statement not covered" >        if (Math.min(domain[0], domain[1]) &lt; 0 &amp;&amp; Math.max(domain[0], domain[1]) &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >            customTicks.push(0);</span>
        }
<span class="cstat-no" title="statement not covered" >        customTicks.push(domain[1]);</span>
<span class="cstat-no" title="statement not covered" >        customTicks.push(domain[0]);</span>
<span class="cstat-no" title="statement not covered" >        return customTicks;</span>
    },
    tickCount: <span class="fstat-no" title="function not covered" >function (scale, pixelsPerTick) {</span>
<span class="cstat-no" title="statement not covered" >        var count = Math.round((scale.range()[1] - scale.range()[0]) / pixelsPerTick);</span>
<span class="cstat-no" title="statement not covered" >        if (count &lt; 2) {</span>
<span class="cstat-no" title="statement not covered" >            count = 3;</span>
        }
        else <span class="cstat-no" title="statement not covered" >if (count &lt; 5) {</span>
<span class="cstat-no" title="statement not covered" >            count = 5;</span>
        }
        else <span class="cstat-no" title="statement not covered" >if (count &lt; 10) {</span>
<span class="cstat-no" title="statement not covered" >            count = 10;</span>
        }
<span class="cstat-no" title="statement not covered" >        return count;</span>
    },
    customTicks: function (scale, pixelsPerTick, hardRules, simple) {
        var customTicks = [];
        <span class="missing-if-branch" title="if path not taken" >I</span>if (simple) {
<span class="cstat-no" title="statement not covered" >            customTicks = this.simpleTicks(scale);</span>
        } else {
            customTicks = this.detailedTicks(scale, pixelsPerTick);
            var pos = scale.domain()[0] &gt; scale.domain()[1] ? 1 : 0;
            hardRules.push(scale.domain()[pos]);
        }
        customTicks = this.removeDuplicateTicks(scale, customTicks);
        return customTicks;
    }
};
&nbsp;</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Jun 12 2015 11:33:51 GMT+0100 (BST)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
